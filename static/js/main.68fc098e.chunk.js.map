{"version":3,"sources":["api/api.ts","Components/Header/Header.module.css","redux/profile-reducer.ts","assets/img/user-png-2.png","redux/dialogs-reducer.ts","assets/preloader/loader.svg","Components/Users/User.module.css","Components/NavBar/NavBar.module.css","serviceWorker.ts","Components/NavBar/NavBar.tsx","redux/selectors/users-selectors.ts","redux/users-reducer.ts","common/Paginator/Paginator.tsx","Components/Users/User.tsx","Components/Users/UsersSearchForm.tsx","Components/Users/Users.tsx","Components/Users/UsersContainer.tsx","Components/Header/Header.tsx","redux/auth-reducer.ts","Components/Header/HeaderContainer.tsx","Components/Login/LoginForm.tsx","Components/Login/Login.tsx","redux/app-reducer.ts","api/chat-api.ts","redux/chat-reducer.ts","redux/redux-store.ts","hoc/WithSuspense.tsx","Components/chatPage/chatPage.tsx","App.tsx","index.tsx","common/Preloader/Preloader.tsx","common/Paginator/Paginator.module.css","utils/Validator.tsx","common/FormsControls/FormControl.module.css","common/FormsControls/FormsControls.tsx"],"names":["ResultCodesEnum","ResultCodeForCapcthaEnum","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","searchUserName","friend","get","then","response","data","unfollow","userId","delete","res","follow","post","authAPI","authMe","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptchaUrl","profileAPI","getProfile","getStatus","updateStatus","status","put","updatePhoto","photoFile","formData","FormData","append","saveProfile","profile","module","exports","initialState","postsData","id","v1","message","likes","userProfile","profileReducer","state","action","type","newPost","newPostText","photos","profileActions","addPostActionCreator","setUserProfileAC","setStatusAC","updatePhotoAC","getUserProfileTC","dispatch","a","getStatusTC","updateStatusTC","resultCode","Success","updatePhotoTC","file","saveProfileTC","getState","auth","Error","stopSubmit","_error","messages","Promise","reject","messagesData","text","dialogsData","name","dialogsReducer","newMessage","dialogsActions","sendMessageAC","Boolean","window","location","hostname","match","NavBar","className","s","nav","item","to","activeClassName","activeLink","createSelector","usersPage","users","filter","el","getPageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","followingInProgress","getUsersFilter","initialStateUsers","term","usersActions","payload","getUsersTC","items","totalCount","followUnfollowFlow","apiMethod","actionCreator","Paginator","props","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","nameClass","p","styles","pageNumber","selectedPage","paginator","onClick","map","key","e","paginator_btn","User","user","style","PhotoAva","alt","src","small","avaUserDefault","followed","disabled","some","usersSearchFormValidate","values","UsersSearchForm","React","memo","useSelector","enableReinitialize","initialValues","String","validate","onSubmit","setSubmitting","onFilterChanged","console","log","isSubmitting","as","value","Users","useDispatch","history","useHistory","useEffect","parsed","queryString","search","substr","actualPage","actualFilter","page","query","pathname","bind","followTC","unFollow","unFollowTC","u","UsersPage","Preloader","Header","header","href","header_loginBlock","isAuth","captchaUrl","authActions","getAuthUserDataTC","getCapthaUrlTC","url","HeaderContainer","this","Component","connect","LoginReduxForm","reduxForm","form","handleSubmit","error","Field","component","Input","placeholder","FieldRequired","formSummaryError","LoginPage","CaptchaIsRequired","errorMessage","length","appActions","initialized","subscribers","ws","openHandler","notifyAboutStatus","closeHandler","setTimeout","createChanel","messageHandler","newMessages","JSON","parse","forEach","errorHandler","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatApi","eventName","callback","send","_newMessageHandler","newMessageHandlerCreator","chatActions","setMessages","_newStatusHandler","newStatusHandlerCreator","changeStatus","cleanMessage","reducers","combineReducers","profilePage","messagesPage","formReducer","chat","m","index","array","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","WithSuspense","fallback","_store_","ChatPage","Chat","margin","width","border","Messages","messagesAnchorRef","useRef","isAutoScroll","setIsAutoScroll","current","scrollIntoView","behavior","height","overflowY","marginBottom","onScroll","currentTarget","abs","scrollHeight","scrollTop","clientHeight","Message","ref","photo","userName","display","justifyContent","alignItems","flexBasis","textAlign","AddMessageForm","myMessage","setMyMessage","onChange","DialogsContainer","lazy","ProfileContainer","App","initializeApp","exact","path","render","AppContainer","withRouter","WrappedApp","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","preloader","maxLengthCreator","maxLength","FormControl","meta","children","hasError","touched","Textarea","input","restProps"],"mappings":"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","file":"static/js/main.68fc098e.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport {UserType} from '../redux/users-reducer';\r\nimport {authDataType} from '../redux/auth-reducer';\r\nimport {UserProfilePhotosType, UserProfileType} from '../redux/profile-reducer';\r\n\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {'API-KEY': 'aee1e098-c1ec-45af-b764-0edfc4a89fa8'}\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 5, searchUserName: string = '', friend: null | boolean = null) {\r\n        return instance.get<GetItemsType>(\r\n            `users?page=${currentPage}&count=${pageSize}&term=${searchUserName}`\r\n            + (friend === null ? '' : `&friend=${friend}`))\r\n            .then(response => response.data)\r\n    },\r\n\r\n    unfollow(userId: string) {\r\n        return instance.delete<ResponseType>(`follow/${userId}`)\r\n            .then(res => res.data)\r\n    },\r\n\r\n    follow(userId: string) {\r\n        return instance.post<ResponseType>(`follow/${userId}`)\r\n            .then(res => res.data)\r\n    },\r\n}\r\n\r\n\r\nexport const authAPI = {\r\n    authMe() {\r\n        return instance.get<ResponseType<authDataType>>('auth/me')\r\n            .then(response => response.data)\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: string = '') {\r\n        return instance.post<ResponseType<LoginResponseDataType, ResultCodesEnum | ResultCodeForCapcthaEnum>>('auth/login', {\r\n            email,\r\n            password,\r\n            rememberMe,\r\n            captcha\r\n        }).then(response => response.data)\r\n    },\r\n    logout() {\r\n        return instance.delete<ResponseType<authDataType>>('auth/login')\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get<{ url: string }>('security/get-captcha-url')\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number | null) {\r\n        return instance.get<UserProfileType>(`profile/${userId}`)\r\n    },\r\n    getStatus(userId: number | null) {\r\n        return instance.get(`profile/status/${userId}`)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put(`profile/status/`, {status: status})\r\n    },\r\n    updatePhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile)\r\n        return instance.put<ResponseType<UpdatePhotoResDataType>>(`profile/photo`, formData)\r\n            .then(response => response.data)\r\n    },\r\n    saveProfile(profile: UserProfileType) {\r\n        return instance.put<ResponseType>(`profile`, profile)\r\n            .then((res) => res.data)\r\n    },\r\n}\r\n\r\ntype UpdatePhotoResDataType = { photos: UserProfilePhotosType }\r\n\r\nexport type ResponseType<D = {}, RC = ResultCodesEnum> = {\r\n    data: D\r\n    messages: Array<string>\r\n    resultCode: RC\r\n}\r\ntype LoginResponseDataType = {\r\n    userId: number\r\n}\r\n\r\nexport type GetItemsType = {\r\n    items: Array<UserType>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1\r\n}\r\n\r\nexport enum ResultCodeForCapcthaEnum {\r\n    CaptchaIsRequired = 10\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2cJrg\",\"header_loginBlock\":\"Header_header_loginBlock__3eTen\"};","import {v1} from 'uuid';\r\nimport {AppStateType, InferActionsTypes} from './redux-store';\r\nimport {profileAPI, ResultCodesEnum} from '../api/api';\r\nimport {FormAction, stopSubmit} from 'redux-form';\r\nimport {ThunkAction} from 'redux-thunk';\r\n\r\n\r\n\r\nlet initialState = {\r\n    postsData:\r\n        [\r\n            {id: v1(), message: 'Hi, how are you?', likes: 7},\r\n            {id: v1(), message: 'Hi, how are you?', likes: 7},\r\n            {id: v1(), message: 'Hallo, i am fine!', likes: 10}\r\n        ] as Array<PostDataType>,\r\n    userProfile: null as UserProfileType | null,\r\n    status: '',\r\n};\r\nexport type InitialStateProfileType = typeof initialState;\r\n\r\nexport const profileReducer = (state = initialState, action: ProfileActionsTypes): InitialStateProfileType => {\r\n\r\n    switch (action.type) {\r\n        case '/PROFILE/ADD_POST': {\r\n            const newPost = {id: v1(), message: action.newPostText, likes: 0}\r\n            return {...state, postsData: [newPost, ...state.postsData]}\r\n        }\r\n        case '/PROFILE/SET-USER-PROFILE': {\r\n            return {...state, userProfile: action.userProfile}\r\n        }\r\n        case '/PROFILE/SET-STATUS': {\r\n            return {...state, status: action.status}\r\n        }\r\n        case '/PROFILE/UPDATE-PHOTO': {\r\n            return {...state, userProfile: {...state.userProfile, photos: action.photos} as UserProfileType}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n// actions\r\ntype ProfileActionsTypes = InferActionsTypes<typeof profileActions>\r\nexport const profileActions = {\r\n    addPostActionCreator: (newPostText: string) => ({\r\n        type: '/PROFILE/ADD_POST', newPostText\r\n    } as const),\r\n    setUserProfileAC: (userProfile: UserProfileType) => ({\r\n        type: '/PROFILE/SET-USER-PROFILE', userProfile\r\n    } as const),\r\n    setStatusAC: (status: string) => ({\r\n        type: '/PROFILE/SET-STATUS', status\r\n    } as const),\r\n    updatePhotoAC: (photos: UserProfilePhotosType) => ({\r\n        type: '/PROFILE/UPDATE-PHOTO', photos\r\n    } as const),\r\n\r\n\r\n}\r\n\r\n//thunk's\r\n\r\ntype thunkType = ThunkAction<void, AppStateType, unknown, ProfileActionsTypes | FormAction>\r\nexport const getUserProfileTC = (userId: number | null): thunkType => async (dispatch) => {\r\n    let response = await profileAPI.getProfile(userId)\r\n    dispatch(profileActions.setUserProfileAC(response.data))\r\n}\r\n\r\nexport const getStatusTC = (userId: number | null): thunkType => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId)\r\n    dispatch(profileActions.setStatusAC(response.data))\r\n}\r\n\r\nexport const updateStatusTC = (status: string): thunkType => async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(status)\r\n    if (response.data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(profileActions.setStatusAC(status))\r\n    }\r\n}\r\n\r\nexport const updatePhotoTC = (file: File): thunkType => async (dispatch) => {\r\n    let response = await profileAPI.updatePhoto(file)\r\n    if (response.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(profileActions.updatePhotoAC(response.data.photos))\r\n    }\r\n}\r\nexport const saveProfileTC = (profile: UserProfileType): thunkType =>\r\n    async (dispatch,getState) => {\r\n        let userId = getState().auth.userId;\r\n        let response = await profileAPI.saveProfile(profile)\r\n        if (response.resultCode === ResultCodesEnum.Success) {\r\n            if(userId !== null){\r\n                dispatch(getUserProfileTC(userId))\r\n            }else {\r\n                throw new Error(\"userId can't be null\")\r\n            }\r\n        }else{\r\n            dispatch(stopSubmit('edit-profile', {_error: response.messages[0] }))\r\n            return Promise.reject(response.messages[0])\r\n            // dispatch(stopSubmit('edit-profile', {'contacts': {'facebook' :response.messages[0]}}))\r\n            // для подсветки каждого невалидного инпута(распарсить строку ошибки и динамичкски подставлять)\r\n\r\n        }\r\n    }\r\n\r\n//type's\r\nexport type PostDataType = {\r\n    id: string\r\n    message: string\r\n    likes: number\r\n}\r\nexport type contactsType = {\r\n    facebook: string\r\n    website: string\r\n    vk: string\r\n    twitter: string\r\n    instagram: string\r\n    youtube: string\r\n    github: string\r\n    mainLink: string\r\n}\r\nexport type UserProfilePhotosType = {\r\n    small: string\r\n    large: string\r\n}\r\nexport type UserProfileType = {\r\n    aboutMe: string\r\n    contacts: contactsType\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: number\r\n    photos: UserProfilePhotosType\r\n}","module.exports = \"data:image/png;base64,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\"","import {v1} from \"uuid\";\r\nimport {InferActionsTypes} from \"./redux-store\";\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof dialogsActions>\r\nexport type messagesDataType = {\r\n    id: string\r\n    text: string\r\n}\r\nexport type dialogsDataType = {\r\n    id: string\r\n    name: string\r\n}\r\n\r\ntype initialStateType = typeof initialState;\r\n\r\nlet initialState = {\r\n    messagesData: [\r\n        {id: v1(), text: 'hi'},\r\n        {id: v1(), text: 'hello'},\r\n        {id: v1(), text: 'goodbye!'}\r\n    ] as Array<messagesDataType>,\r\n    dialogsData: [\r\n        {id: v1(), name: 'Sasha'},\r\n        {id: v1(), name: 'Masha'},\r\n        {id: v1(), name: 'Dasha'},\r\n        {id: v1(), name: 'Kirill'},\r\n        {id: v1(), name: 'Stas'}\r\n    ] as Array<dialogsDataType>,\r\n};\r\n\r\n\r\nexport const dialogsReducer = (state = initialState, action: ActionsTypes): initialStateType => {\r\n    switch (action.type) {\r\n        case 'SEND_MESSAGE': {\r\n            return {...state, messagesData: [{id: v1(), text: action.newMessage}, ...state.messagesData]}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const dialogsActions = {\r\n    sendMessageAC: (newMessage: string) => ({\r\n        type: 'SEND_MESSAGE', newMessage\r\n    } as const),\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/loader.859f1396.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PhotoAva\":\"User_PhotoAva__1mw6j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"NavBar_nav__HnEU1\",\"item\":\"NavBar_item__3u_xt\",\"activeLink\":\"NavBar_activeLink__16yS3\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport s from './NavBar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nexport function NavBar() {\r\n    return (\r\n        <nav className= {s.nav}>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/profile\" activeClassName={s.activeLink}>\r\n                    Profile\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/dialogs\" activeClassName={s.activeLink}>\r\n                    Dialogs\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/users\" activeClassName={s.activeLink}>\r\n                    Users\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to='/chat' activeClassName={s.activeLink}>\r\n                    DevChat\r\n                </NavLink>\r\n            </div>\r\n            <div className={s.item}>\r\n                <NavLink to=\"/music\" activeClassName={s.activeLink}>\r\n                    Music\r\n                </NavLink>\r\n            </div>\r\n        </nav>\r\n    )\r\n}","import {AppStateType} from '../redux-store';\r\nimport {createSelector} from 'reselect';\r\n\r\n\r\nconst getUsersSelector = (state: AppStateType) => {\r\n    return state.usersPage.users\r\n}\r\nexport const getUsers  = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(el => true)\r\n})\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\nexport const getUsersFilter = (state: AppStateType) => {\r\n    return state.usersPage.filter\r\n}\r\n\r\n","import {AppStateType, InferActionsTypes} from './redux-store';\r\nimport {ResponseType, ResultCodesEnum, usersAPI} from '../api/api';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {Dispatch} from 'redux';\r\n\r\n\r\nconst initialStateUsers = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as Array<string>,\r\n    userId: '',\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean,\r\n    }\r\n}\r\n\r\nexport const usersReducer = (state = initialStateUsers, action: UsersActionsType): initialStateUsersType => {\r\n    switch (action.type) {\r\n        case '/USERS/FOLLOW': {\r\n            return {\r\n                ...state,\r\n                users: state.users.map(el => el.id === action.userId ? {...el, followed: true} : el)\r\n            }\r\n        }\r\n        case '/USERS/UNFOLLOW': {\r\n            return {\r\n                ...state,\r\n                users: state.users.map(el => el.id === action.userId ? {...el, followed: false} : el)\r\n            }\r\n        }\r\n        case '/USERS/SET_USERS': {\r\n            return {...state, users: [...action.users]}\r\n        }\r\n        case '/USERS/SET_CURRENT-PAGE': {\r\n            return {...state, currentPage: action.currentPage}\r\n        }\r\n        case '/USERS/SET-TOTAL-USERS-COUNT': {\r\n            return {...state, totalUsersCount: action.totalUsersCount}\r\n        }\r\n        case '/USERS/TOGGLE-IS-FETCHING': {\r\n            return {...state, isFetching: action.isFetching}\r\n        }\r\n        case '/USERS/TOGGLE-IS-FOLLOWING=PROGRESS': {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        }\r\n        case '/USERS/SET_FILTER' : {\r\n            return {...state, filter: action.payload}\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// actions\r\nexport type UsersActionsType = InferActionsTypes<typeof usersActions>\r\n\r\nexport const usersActions = {\r\n    followSuccessAC: (userId: string) => ({type: '/USERS/FOLLOW', userId: userId} as const),\r\n    unFollowSuccessAC: (userId: string) => ({type: '/USERS/UNFOLLOW', userId: userId} as const),\r\n    setUsersAC: (users: Array<UserType>) => ({type: '/USERS/SET_USERS', users: users} as const),\r\n    setCurrentPageAC: (currentPage: number) => ({type: '/USERS/SET_CURRENT-PAGE', currentPage} as const),\r\n    setFilter: (filter: FilterUserType) => ({type: '/USERS/SET_FILTER', payload: filter} as const),\r\n    setTotalUsersCountAC: (totalUsersCount: number) => ({\r\n        type: '/USERS/SET-TOTAL-USERS-COUNT',\r\n        totalUsersCount\r\n    } as const),\r\n    toggleIsFetchingAC: (isFetching: boolean) => ({type: '/USERS/TOGGLE-IS-FETCHING', isFetching} as const),\r\n    toggleIsFollowingProgressAC: (isFetching: boolean, userId: string) => ({\r\n        type: '/USERS/TOGGLE-IS-FOLLOWING=PROGRESS',\r\n        isFetching,\r\n        userId\r\n    } as const),\r\n}\r\n// thunk's\r\ntype thunkType = ThunkAction<void, AppStateType, unknown, UsersActionsType>\r\n\r\nexport const getUsersTC = (currentPage: number,\r\n                           pageSize: number, filter: FilterUserType): thunkType => async (dispatch) => {\r\n\r\n    dispatch(usersActions.toggleIsFetchingAC(true))\r\n    dispatch(usersActions.setCurrentPageAC(currentPage))\r\n    dispatch(usersActions.setFilter(filter))\r\n\r\n    let response = await usersAPI.getUsers(currentPage, pageSize, filter.term, filter.friend)\r\n    dispatch(usersActions.toggleIsFetchingAC(false))\r\n    dispatch(usersActions.setUsersAC(response.items))\r\n    dispatch(usersActions.setTotalUsersCountAC(response.totalCount))\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch: Dispatch<UsersActionsType>,\r\n                                  userId: string,\r\n                                  apiMethod: (userId: string) => Promise<ResponseType>,\r\n                                  actionCreator: (userId: string) => UsersActionsType) => {\r\n    dispatch(usersActions.toggleIsFollowingProgressAC(true, userId))\r\n    let response = await apiMethod(userId)\r\n    if (response.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(usersActions.toggleIsFollowingProgressAC(false, userId))\r\n}\r\n\r\nexport const followTC = (userId: string): thunkType => {\r\n    return async (dispatch) => {\r\n        await followUnfollowFlow(dispatch, userId, usersAPI.follow.bind(usersAPI), usersActions.followSuccessAC)\r\n    }\r\n}\r\n\r\nexport const unFollowTC = (userId: string): thunkType => {\r\n    return async (dispatch) => {\r\n        let apiMethod = usersAPI.unfollow.bind(usersAPI);\r\n        let actionCreator = usersActions.unFollowSuccessAC;\r\n        await followUnfollowFlow(dispatch, userId, apiMethod, actionCreator)\r\n    }\r\n}\r\n\r\n\r\ntype UserLocationType = {\r\n    city: string\r\n    country: string\r\n}\r\nexport type UserType = {\r\n    id: string\r\n    photoUrl?: string\r\n    followed: boolean\r\n    name: string\r\n    status: string\r\n    location: UserLocationType\r\n    photos: {\r\n        small: string\r\n        large: string\r\n    }\r\n}\r\nexport type initialStateUsersType = typeof initialStateUsers\r\nexport type FilterUserType = typeof initialStateUsers.filter","import React, {useState} from 'react';\r\nimport styles from '../Paginator/Paginator.module.css';\r\n\r\ntype PaginatorType = {\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage?: number\r\n    portionSize?: number\r\n    onPageChanged: (pageNumber: number) => void\r\n}\r\n\r\nexport const Paginator = (props: PaginatorType) => {\r\n    const {pageSize, totalUsersCount, currentPage, onPageChanged, portionSize = 10} = props\r\n\r\n    let pagesCount = Math.ceil(totalUsersCount / pageSize);\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    let portionCount = Math.ceil(pagesCount / portionSize);\r\n\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    const nameClass = (p: number) => currentPage === p ? `${styles.pageNumber}  ${styles.selectedPage}` : styles.pageNumber\r\n\r\n    return (\r\n        <div className={styles.paginator}>\r\n\r\n            {(portionNumber > 1) ?\r\n                <span>\r\n                    <button onClick={() => setPortionNumber(1)}>to start</button>\r\n                    <button onClick={() => setPortionNumber(portionNumber - 1)}>PREV</button>\r\n                </span>\r\n                : ''\r\n            }\r\n\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                .map((p) => {\r\n                    return <span className={nameClass(p)}\r\n                                 key={p}\r\n                                 onClick={(e) => {\r\n                                     onPageChanged(p);\r\n                                 }}>{p}</span>\r\n                })}\r\n            {portionCount > portionNumber\r\n                ? <span>\r\n                    <button className={styles.paginator_btn}\r\n                            onClick={() => setPortionNumber(portionNumber + 1)}>NEXT</button>\r\n                  <button onClick={() => setPortionNumber(portionCount)}>to end</button>\r\n                </span>\r\n                : ''\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport style from './User.module.css';\r\nimport avaUserDefault from '../../assets/img/user-png-2.png';\r\nimport {UserType} from '../../redux/users-reducer';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\ntype UsersType = {\r\n    user: UserType\r\n    followingInProgress: string[]\r\n    follow: (userId: string) => void\r\n    unfollow: (userId: string) => void\r\n}\r\n\r\nexport const User = (props: UsersType) => {\r\n    const {user, followingInProgress, follow, unfollow} = props;\r\n    return (\r\n        <div>\r\n            <div key={user.id}>\r\n                <span>\r\n                    <div className={style.PhotoAva}>\r\n                        <NavLink to={'/profile/' + user.id}>\r\n                        <img alt={'ava'} src={user.photos.small != null ? user.photos.small : avaUserDefault}/>\r\n                        </NavLink>\r\n                    </div>\r\n                    <div>\r\n                        {user.followed\r\n                            ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                      onClick={() => {\r\n                                          unfollow(user.id)\r\n                                      }}>\r\n                                Unfollow\r\n                            </button>\r\n                            : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                      onClick={() => {\r\n                                          follow(user.id)\r\n                                      }}>\r\n                                Follow\r\n                            </button>\r\n                        }\r\n                    </div>\r\n                </span>\r\n                <span>\r\n                    <span>\r\n                        <div>{user.name}</div>\r\n                        <div>{user.status}</div>\r\n                    </span>\r\n                    <span>\r\n                        <div>{'user.location.country'}</div>\r\n                        <div>{'user.location.city'}</div>\r\n                    </span>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import {Field, Form, Formik} from 'formik';\r\nimport React from 'react';\r\nimport {FilterUserType} from '../../redux/users-reducer';\r\nimport {useSelector} from 'react-redux';\r\nimport {getUsersFilter} from '../../redux/selectors/users-selectors';\r\n\r\nconst usersSearchFormValidate = (values: UsersSearchFormType) => {\r\n    return {} as UsersSearchFormType;\r\n}\r\nexport const UsersSearchForm: React.FC<userFormPropsType> = React.memo((props) => {\r\n    const filter = useSelector(getUsersFilter)\r\n    const submit = (values: UsersSearchFormType,\r\n                    {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\r\n        const filter = {\r\n            term: values.term,\r\n            friend: values.friend === 'null' ? null : values.friend === 'true'\r\n        }\r\n        props.onFilterChanged(filter)\r\n        setSubmitting(false)\r\n        console.log(filter)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Formik\r\n                enableReinitialize\r\n                initialValues={{term: filter.term, friend: String(filter.friend) as FriendFormType}}\r\n                validate={usersSearchFormValidate}\r\n                onSubmit={submit}\r\n            >\r\n                {({isSubmitting}) => (\r\n                    <Form>\r\n                        <Field type=\"text\" name=\"term\"/>\r\n                        <Field name='friend' as='select'>\r\n                            <option value='null'> All</option>\r\n                            <option value='true'> Only Followed</option>\r\n                            <option value='false'> Only Unfollowed</option>\r\n                        </Field>\r\n                        <button type=\"submit\" disabled={isSubmitting}>\r\n                            Find\r\n                        </button>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </div>\r\n    )\r\n})\r\ntype UsersSearchFormType = {\r\n    term: string\r\n    friend: FriendFormType\r\n}\r\ntype FriendFormType = 'true' | 'false' | 'null'\r\ntype userFormPropsType = {\r\n    onFilterChanged: (filter: FilterUserType) => void\r\n}\r\n\r\n","import React, {useEffect} from 'react';\r\nimport {FilterUserType, followTC, getUsersTC, unFollowTC, UserType} from '../../redux/users-reducer';\r\nimport {Paginator} from '../../common/Paginator/Paginator';\r\nimport {User} from './User';\r\nimport {UsersSearchForm} from './UsersSearchForm';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getPageSize,\r\n    getTotalUsersCount, getUsersFilter, getUsers\r\n} from '../../redux/selectors/users-selectors';\r\nimport {useHistory} from 'react-router-dom';\r\nimport * as queryString from 'querystring';\r\n\r\n\r\n// type UsersType = {}\r\n\r\ntype QueryParamsType = { term: string, page: string, friend: string };\r\nexport const Users = () => {\r\n\r\n\r\n    const totalUsersCount = useSelector<AppStateType, number>(getTotalUsersCount);\r\n    const currentPage = useSelector<AppStateType, number>(getCurrentPage)\r\n    const users = useSelector<AppStateType, Array<UserType>>(getUsers);\r\n    const pageSize = useSelector<AppStateType, number>(getPageSize);\r\n    const followingInProgress = useSelector<AppStateType, Array<string>>(getFollowingInProgress);\r\n    const filter = useSelector(getUsersFilter)\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        const parsed = queryString.parse(history.location.search.substr(1)) as QueryParamsType\r\n        let actualPage = currentPage;\r\n        let actualFilter = filter;\r\n\r\n        if (parsed.page) actualPage = +parsed.page;\r\n        if (parsed.term) actualFilter = {...actualFilter, term: parsed.term as string};\r\n        if (parsed.friend) actualFilter = {\r\n            ...actualFilter, friend: parsed.friend === 'null' ?\r\n                null : parsed.friend === 'true'\r\n        };\r\n        dispatch(getUsersTC(actualPage, pageSize, actualFilter))\r\n// eslint-disable-next-line\r\n    }, [dispatch])\r\n    useEffect(() => {\r\n        const query = {} as QueryParamsType;\r\n\r\n        if (filter.term) query.term = filter.term\r\n        if (filter.friend !== null) query.friend = String(filter.friend)\r\n        if (currentPage !== 1) query.page = String(currentPage)\r\n\r\n\r\n        history.push({\r\n            pathname: '/users',\r\n            search: queryString.stringify(query)\r\n            // search: `?term=${filter.term}&friend=${filter.friend}&page=${currentPage}`\r\n        })\r\n    }, [filter, currentPage, history])\r\n    const onPageChanged = (pageNumber: number) => {\r\n        dispatch(getUsersTC(pageNumber, pageSize, filter))\r\n    }\r\n\r\n    const onFilterChanged = (filter: FilterUserType) => {\r\n        dispatch(getUsersTC(1, pageSize, filter))\r\n    }\r\n    const follow = (userId: string) => {\r\n        dispatch(followTC(userId))\r\n    }\r\n    const unFollow = (userId: string) => {\r\n        dispatch(unFollowTC(userId))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <UsersSearchForm onFilterChanged={onFilterChanged}/>\r\n\r\n            <Paginator currentPage={currentPage} onPageChanged={onPageChanged}\r\n                       pageSize={pageSize} totalUsersCount={totalUsersCount} portionSize={5}\r\n            />\r\n            {\r\n                users.map(u => <User key={u.id} user={u}\r\n                                     follow={follow} unfollow={unFollow}\r\n                                     followingInProgress={followingInProgress}\r\n                />)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {Preloader} from '../../common/Preloader/Preloader';\r\nimport {getIsFetching,} from '../../redux/selectors/users-selectors';\r\nimport {Users} from './Users';\r\n\r\n\r\nexport const UsersPage = () => {\r\n    const  isFetching = useSelector(getIsFetching)\r\n    return (\r\n        <>\r\n            {isFetching ? <Preloader/> : null}\r\n            <Users/>\r\n        </>\r\n    )\r\n}\r\n\r\n// в React.Component<UsersContainerType, Array<UserType>>  : < тип пропсов самой компоненты, тип локального стейта внутри компоненты (если он есть) >\r\n\r\n// const mapDispatchToProps = (dispatch: Dispatch<UsersActionsType>): mapDispatchToPropsType => {\r\n//     return {\r\n//         follow: (userId) => {\r\n//             dispatch(usersActions.followAC(userId))\r\n//         },\r\n//         unFollow: (userId) => {\r\n//             dispatch(usersActions.unFollowAC(userId))\r\n//         },\r\n//         setUsers: (users) => {\r\n//             dispatch(usersActions.setUsersAC(users))\r\n//         },\r\n//         setCurrentPage: (currentPage) => {\r\n//             dispatch(usersActions.setCurrentPageAC(currentPage))\r\n//         },\r\n//         setTotalUsersCount: (totalUsersCount) => {\r\n//             dispatch(usersActions.setTotalUsersCountAC(totalUsersCount))\r\n//         },\r\n//         toggleIsFetching: (isFetching) => {\r\n//             dispatch(usersActions.toggleIsFetchingAC(isFetching))\r\n//         }\r\n//\r\n//     }\r\n// }","import React from 'react';\r\nimport s from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\ntype HeaderType = {\r\n    login: null | string\r\n    isFetching: null | boolean\r\n    isAuth: boolean\r\n    logout: () => void\r\n}\r\n\r\n\r\nexport function Header(props: HeaderType) {\r\n    return (\r\n        <header className={s.header}>\r\n            <a href='/profile'><img alt='logo'\r\n                             src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Logo_TV_2015.svg/1200px-Logo_TV_2015.svg.png\"/>\r\n            </a>\r\n            <div className={s.header_loginBlock}>\r\n                {\r\n                    (props.isAuth)\r\n                        ? <div>\r\n                            <div>{props.login}</div>\r\n                            <button onClick={props.logout}> Logout</button>\r\n                        </div>\r\n                        : <NavLink to={'/login'}>\r\n                            Login\r\n                        </NavLink>\r\n                }\r\n            </div>\r\n        </header>\r\n    )\r\n}","import {AppStateType, InferActionsTypes} from './redux-store';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {authAPI, ResultCodeForCapcthaEnum, ResultCodesEnum, securityAPI} from '../api/api';\r\nimport {stopSubmit} from 'redux-form';\r\nimport {FormAction} from 'redux-form/lib/actions';\r\n\r\n\r\nconst initialState: AuthStateType = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isFetching: null,\r\n    isAuth: false,\r\n    captchaUrl: null,\r\n}\r\n\r\nexport const authReducer = (state = initialState, action: authActionsType): AuthStateType => {\r\n\r\n    switch (action.type) {\r\n        case '/AUTH/SET-USER-DATA':\r\n            return {\r\n                ...state,\r\n                userId: action.data.id,\r\n                email: action.data.email,\r\n                login: action.data.login,\r\n                isAuth: action.isAuth,\r\n            }\r\n        case '/AUTH/SET-CAPTHA-SUCCESS':\r\n            return {...state, captchaUrl: action.captchaUrl}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//action's\r\nexport type authActionsType = InferActionsTypes<typeof authActions>\r\n\r\nexport const authActions = {\r\n    setAuthUserDataAC: (data: authDataType, isAuth: boolean) => ({type: '/AUTH/SET-USER-DATA', data, isAuth} as const),\r\n    setCaptchaUrl: (captchaUrl: string) => ({type: '/AUTH/SET-CAPTHA-SUCCESS', captchaUrl} as const),\r\n\r\n}\r\n\r\n//thunk's\r\n type thunkType = ThunkAction<any, AppStateType, unknown, authActionsType | FormAction>\r\n\r\nexport const getAuthUserDataTC = (): thunkType => async (dispatch) => {\r\n    let response = await authAPI.authMe();\r\n    if (response.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(authActions.setAuthUserDataAC(response.data, true))\r\n    }\r\n}\r\n\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean,captcha:string): thunkType => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe,captcha);\r\n    if (response.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(getAuthUserDataTC())\r\n    } else {\r\n        if (response.resultCode === ResultCodeForCapcthaEnum.CaptchaIsRequired) {\r\n            dispatch(getCapthaUrlTC())\r\n        }\r\n        let errorMessage = response.messages.length > 0 ? response.messages[0] : 'Some error';\r\n        dispatch(stopSubmit('login', {_error: errorMessage}))\r\n    }\r\n}\r\nexport const logoutTC = (): thunkType => async (dispatch) => {\r\n    let response = await authAPI.logout()\r\n    if (response.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(authActions.setAuthUserDataAC({id: null, email: null, login: null}, false))\r\n    }\r\n}\r\n\r\nexport const getCapthaUrlTC = (): thunkType => async (dispatch) => {\r\n    const response = await securityAPI.getCaptchaUrl()\r\n    dispatch(authActions.setCaptchaUrl(response.url))\r\n}\r\n\r\n\r\n//type's\r\nexport type AuthStateType = {\r\n    userId: null | number\r\n    email: null | string\r\n    login: null | string\r\n    isFetching: null | boolean\r\n    isAuth: boolean\r\n    captchaUrl: null | string\r\n}\r\nexport type authDataType = {\r\n    id: null | number\r\n    email: null | string\r\n    login: null | string\r\n}\r\n\r\n","import React from 'react';\r\nimport {Header} from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {logoutTC} from '../../redux/auth-reducer';\r\n\r\n\r\ntype HeaderContainerType = mapStateToPropsType & mapDispatchToPropsType;\r\n\r\nclass HeaderContainer extends React.Component<HeaderContainerType> {\r\n\r\n\r\n\r\n    render() {\r\n        return <Header\r\n            login={this.props.login}\r\n            isAuth={this.props.isAuth}\r\n            isFetching={this.props.isFetching}\r\n            logout={this.props.logout}\r\n        />\r\n    }\r\n}\r\n\r\ntype mapStateToPropsType = {\r\n    login: null | string\r\n    isFetching: null | boolean\r\n    isAuth: boolean\r\n};\r\n\r\ntype mapDispatchToPropsType = {\r\n    logout: () => void\r\n};\r\n\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStateToPropsType => {\r\n    return {\r\n        login: state.auth.login,\r\n        isFetching: state.auth.isFetching,\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    logout: logoutTC,\r\n})(HeaderContainer)\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {Input} from '../../common/FormsControls/FormsControls';\r\nimport {FieldRequired} from '../../utils/Validator';\r\nimport styles from './../../common/FormsControls/FormControl.module.css';\r\n\r\nexport type LoginFormDataType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\ntype Iprops = {\r\n    captchaUrl: string | null\r\n}\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormDataType, Iprops> & Iprops> = (props) => {\r\n    const {handleSubmit, error} = props;\r\n    return (\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field component={Input}\r\n                       type=\"email\"\r\n                       name='email'\r\n                       placeholder='login'\r\n                       validate={[FieldRequired]}\r\n                />\r\n            </div>\r\n            <div>\r\n                <Field component={Input}\r\n                       type=\"password\"\r\n                       name='password'\r\n                       placeholder='password'\r\n                       validate={[FieldRequired]}\r\n                />\r\n            </div>\r\n            {error && <div className={styles.formSummaryError}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <Field component='input'\r\n                       type=\"checkbox\"\r\n                       name='rememberMe'\r\n                /> Remember me\r\n            </div>\r\n            {props.captchaUrl && <img src={props.captchaUrl} alt={'captcha img'}/>}\r\n            {props.captchaUrl &&\r\n            <div>\r\n               <Field component='input'\r\n                      type=\"text\"\r\n                      name='captcha'\r\n                      placeholder='anti bot symbols'\r\n                      validate={[FieldRequired]}\r\n               /> Enter symbols from image..\r\n            </div>\r\n            }\r\n            <div>\r\n                <button> Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormDataType, Iprops>({form: 'login'})(LoginForm)\r\nexport default LoginReduxForm\r\n","import React from 'react';\r\nimport LoginReduxForm, {LoginFormDataType} from './LoginForm';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {loginTC} from '../../redux/auth-reducer';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\n\r\nexport const LoginPage: React.FC = (props) => {\r\n\r\n    const captchaUrl = useSelector<AppStateType, null | string>(state => state.auth.captchaUrl)\r\n    const isAuth = useSelector<AppStateType, boolean>(state => state.auth.isAuth)\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = (formData: LoginFormDataType) => {\r\n        console.log(formData)\r\n        dispatch(loginTC(formData.email, formData.password, formData.rememberMe, formData.captcha))\r\n    }\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n    return (\r\n        <div>\r\n            <h1> LOGIN </h1>\r\n            <LoginReduxForm captchaUrl={captchaUrl} onSubmit={onSubmit}/>\r\n            <div>\r\n                <p><b>For Testing:</b></p>\r\n                <p>Email: free@samuraijs.com</p>\r\n                <p>Password: free</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// type MapDispatchToPropsType = {\r\n//     login: (email: string, password: string, rememberMe: boolean,captcha:string) => void\r\n//     logout: () => void\r\n// }\r\n// type MapStateToPropsType = { isAuth:boolean,capthaUrl:string | null}\r\n// // const MapStateToProps = (state:AppStateType)=> ({\r\n// //     isAuth: state.auth.isAuth,\r\n// //     capthaUrl: state.auth.capthaUrl\r\n// // })\r\n//\r\n// export default connect<MapStateToPropsType, MapDispatchToPropsType, {}, AppStateType>(MapStateToProps, {\r\n//     login: loginTC,\r\n//     logout: logoutTC\r\n// })(LoginPage)\r\n//\r\n\r\n","import {AppStateType, InferActionsTypes} from './redux-store';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {FormAction} from 'redux-form/lib/actions';\r\nimport {getAuthUserDataTC} from './auth-reducer';\r\n\r\n//actions\r\nexport type appActionsType = InferActionsTypes<typeof appActions>\r\n\r\nexport const appActions = {\r\n    initializedAppAC: () => ({type: 'INITIALIZED-APP'} as const),\r\n}\r\n\r\n//thunk's\r\ntype thunkType = ThunkAction<void, AppStateType, unknown, appActionsType | FormAction>\r\n\r\nexport const initializeAppTC = (): thunkType => (dispatch) => {\r\n    let promise = dispatch(getAuthUserDataTC())\r\n    promise.then(() => {\r\n            dispatch( appActions.initializedAppAC())\r\n    })\r\n}\r\nexport const appReducer = (state = initialState, action: appActionsType): initialStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'INITIALIZED-APP': {\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport type initialStateType = {\r\n    initialized: boolean\r\n}\r\nconst initialState: initialStateType = {\r\n    initialized: false\r\n}\r\n","let subscribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null;\r\n\r\n\r\nconst openHandler = () => {\r\n    notifyAboutStatus('ready')\r\n}\r\n\r\nconst closeHandler = () => {\r\n    notifyAboutStatus('pending')\r\n    setTimeout(createChanel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n    let newMessages = JSON.parse(e.data)\r\n    subscribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst errorHandler = () => {\r\n    notifyAboutStatus('error')\r\n}\r\n\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifyAboutStatus = (status: StatusChatType) => {\r\n    subscribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChanel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifyAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatApi = {\r\n    startChatChanel() {\r\n        createChanel()\r\n    },\r\n    stopChatChanel() {\r\n        subscribers['messages-received'] = []\r\n        subscribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNameType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // todo сделать универсальный тип\r\n        // @ts-ignore\r\n        subscribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subscribers[eventName] = subscribers[eventName].filter(el => el !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNameType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter(el => el !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n\r\n}\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusChatType) => void\r\nexport type StatusChatType = 'pending' | 'ready' | 'error'\r\ntype EventsNameType = 'messages-received' | 'status-changed'\r\nexport type ChatMessageType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n    id?: string\r\n}\r\n","import {chatApi, ChatMessageType, StatusChatType} from '../api/chat-api';\r\nimport {BaseThunkType, InferActionsTypes} from './redux-store';\r\nimport {Dispatch} from 'redux';\r\nimport {v1} from 'uuid';\r\n\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusChatType\r\n}\r\n\r\n\r\nexport const chatReducer = (state = initialState, action: ChatActionType) => {\r\n\r\n    switch (action.type) {\r\n        case 'CHAT/SET-MESSAGES':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map(m => ({...m, id: v1()}))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n        case 'CHAT/STATUS-CHANGED':\r\n            return {\r\n                ...state, status: action.payload.status\r\n            }\r\n        case 'CHAT/CLEAN-MESSAGES':\r\n            return {\r\n                ...state, messages: []\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//thunk's\r\nlet _newMessageHandler: ((messages: ChatMessageType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(chatActions.setMessages(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\nlet _newStatusHandler: ((status: StatusChatType) => void) | null = null\r\nconst newStatusHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newStatusHandler === null) {\r\n        _newStatusHandler = (status) => {\r\n            dispatch(chatActions.changeStatus(status))\r\n        }\r\n    }\r\n    return _newStatusHandler\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatApi.startChatChanel()\r\n    chatApi.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatApi.subscribe('status-changed', newStatusHandlerCreator(dispatch))\r\n}\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatApi.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatApi.unsubscribe('status-changed', newStatusHandlerCreator(dispatch))\r\n    dispatch(chatActions.cleanMessage())\r\n    chatApi.stopChatChanel()\r\n\r\n}\r\nexport const sendMessage = (message: string): ThunkType => async () => {\r\n    chatApi.sendMessage(message)\r\n}\r\n//Actions\r\nexport const chatActions = {\r\n    setMessages: (messages: ChatMessageType[]) => ({\r\n        type: 'CHAT/SET-MESSAGES', payload: {messages}\r\n    } as const),\r\n    changeStatus: (status: StatusChatType) => ({\r\n        type: 'CHAT/STATUS-CHANGED', payload: {status}\r\n    } as const),\r\n    cleanMessage: () => ({\r\n        type: 'CHAT/CLEAN-MESSAGES'\r\n    } as const),\r\n}\r\n\r\ntype ThunkType = BaseThunkType<ChatActionType>\r\ntype ChatActionType = InferActionsTypes<typeof chatActions>\r\nexport type initialStateType = typeof initialState\r\n","import {Action, applyMiddleware, combineReducers, compose, createStore} from 'redux';\r\nimport {profileReducer} from './profile-reducer';\r\nimport {usersReducer} from './users-reducer';\r\nimport {dialogsReducer} from './dialogs-reducer';\r\nimport {authReducer} from './auth-reducer';\r\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport {appReducer} from './app-reducer';\r\nimport {chatReducer} from './chat-reducer';\r\n\r\n\r\n\r\ntype RootReducersType = typeof reducers\r\nexport type AppStateType = ReturnType<RootReducersType>;\r\n\r\n\r\n// type PropertiesTypes<T> = T extends { [key: string]: infer U } ? U : never\r\n// export type InferActionsTypes<T extends { [key: string]: (...args: any[]) => any }> = ReturnType<PropertiesTypes<T>>\r\n\r\nexport type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\n\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    messagesPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    chat: chatReducer,\r\n    app: appReducer,\r\n    // sideBar:sideBarReducer\r\n});\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n// @ts-ignore\r\nwindow._store_ = store\r\n\r\n// типизация санок\r\n// type ThunkType = BaseThunkType<ProfileActionsTypes | FormAction>\r\nexport type BaseThunkType<A extends Action = Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>","import React, {Suspense} from 'react';\r\nimport {Preloader} from '../common/Preloader/Preloader';\r\n\r\n\r\nexport function WithSuspense(Component: React.ComponentType) {\r\n    return (props: any) => {\r\n        return <Suspense fallback={<Preloader/>}>\r\n            <Component {...props}/>\r\n        </Suspense>\r\n    }\r\n}","import React, {useEffect, useRef, useState} from 'react';\r\nimport {ChatMessageType, StatusChatType} from '../../api/chat-api';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {sendMessage, startMessagesListening, stopMessagesListening} from '../../redux/chat-reducer';\r\nimport {AppStateType} from '../../redux/redux-store';\r\n\r\nexport const ChatPage = () => {\r\n    return (\r\n        <div>\r\n            <Chat/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Chat: React.FC = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(startMessagesListening())\r\n        return () => {\r\n\r\n            dispatch(stopMessagesListening())\r\n        }\r\n    }, [dispatch])\r\n\r\n    const style = {\r\n        margin: ' 100px auto',\r\n        width: '50%',\r\n        border: '1px solid black'\r\n    } as React.CSSProperties\r\n    return (\r\n        <div style={style}>\r\n            <Messages/>\r\n            <AddMessageForm/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Messages: React.FC = React.memo(() => {\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null)\r\n    const messages = useSelector<AppStateType, ChatMessageType[]>(s => s.chat.messages)\r\n    const [isAutoScroll, setIsAutoScroll] = useState<boolean>(true)\r\n\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        const el = e.currentTarget;\r\n        if (Math.abs((el.scrollHeight - el.scrollTop) - el.clientHeight) < 200) {\r\n            !isAutoScroll && setIsAutoScroll(true)\r\n        } else {\r\n            isAutoScroll && setIsAutoScroll(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (isAutoScroll) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n    }, [isAutoScroll,messages])\r\n\r\n\r\n    const style = {\r\n        height: '400px',\r\n        overflowY: 'auto',\r\n        marginBottom: '30px'\r\n    } as React.CSSProperties\r\n    return <div style={style} onScroll={scrollHandler}>\r\n        {\r\n            messages.map((el) => <div key={el.id}>\r\n                <Message message={el}/>\r\n                <hr/>\r\n                <div ref={messagesAnchorRef}></div>\r\n            </div>)\r\n        }\r\n    </div>\r\n})\r\n\r\nconst Message: React.FC<{ message: ChatMessageType }> = React.memo((props) => {\r\n    const {photo, userName, message} = props.message\r\n    const styleWrap = {\r\n        display: 'flex',\r\n        justifyContent: 'space-evenly',\r\n        alignItems: 'center',\r\n    } as React.CSSProperties\r\n\r\n    return <div style={styleWrap}>\r\n        <img style={{width: '40px', height: '40px'}} src={photo} alt=\"user avatar\"/>\r\n        <div style={{flexBasis: '80%'}}>\r\n            <p>{userName} </p>\r\n            <span style={{textAlign: 'left'}}>{message}</span>\r\n        </div>\r\n    </div>\r\n})\r\n\r\nconst AddMessageForm = () => {\r\n    const [myMessage, setMyMessage] = useState<string>('')\r\n    const status = useSelector<AppStateType, StatusChatType>(s => s.chat.status)\r\n    const dispatch = useDispatch();\r\n    const sendMessageHandler = () => {\r\n        if (!myMessage) return\r\n        dispatch(sendMessage(myMessage))\r\n        setMyMessage('')\r\n    }\r\n\r\n    return <div>\r\n        <textarea onChange={(e) => setMyMessage(e.currentTarget.value)} value={myMessage}></textarea>\r\n        <div>\r\n            <button disabled={status !== 'ready'} onClick={sendMessageHandler}> Отправить</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport './App.css';\r\nimport {NavBar} from './Components/NavBar/NavBar'\r\nimport {HashRouter, Redirect, Route, Switch, withRouter} from 'react-router-dom';\r\nimport {UsersPage} from './Components/Users/UsersContainer';\r\n\r\nimport HeaderContainer from './Components/Header/HeaderContainer';\r\nimport {LoginPage} from './Components/Login/Login';\r\nimport {connect, Provider} from 'react-redux';\r\nimport {AppStateType, store} from './redux/redux-store';\r\nimport {initializeAppTC} from './redux/app-reducer';\r\nimport {compose} from 'redux';\r\nimport {Preloader} from './common/Preloader/Preloader';\r\nimport {WithSuspense} from './hoc/WithSuspense';\r\nimport {ChatPage} from './Components/chatPage/chatPage';\r\n\r\n\r\n// Для React.lazy  нужен дэфолтный экспорт компоненты !!!! + обертка WithSuspense (для прелоадера)\r\nconst DialogsContainer = React.lazy(() => import('./Components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./Components/Profile/ProfileContainer'));\r\n\r\nclass App extends React.Component<mapStateToPropsType & mapDispatchToPropsType> {\r\n\r\n    componentDidMount() {\r\n        this.props.initializeApp()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) return <Preloader/>\r\n\r\n        return (\r\n            <div className='App_wrapper'>\r\n                <HeaderContainer/>\r\n                <NavBar/>\r\n                <div className='App_wrapper__content'>\r\n                    <Switch>\r\n                        <Route exact path={'/'}\r\n                               render={() => <Redirect to={'/profile'}/>}\r\n                        />\r\n                        <Route path={'/profile/:userId?'}\r\n                               render={WithSuspense(ProfileContainer)}\r\n                        />\r\n                        <Route path={'/login'}\r\n                               render={() => <LoginPage/>}\r\n                        />\r\n                        <Route path={'/dialogs'}\r\n                               render={WithSuspense(DialogsContainer)}\r\n                        />\r\n                        <Route path={'/users'}\r\n                               render={() => <UsersPage/>}\r\n                        />\r\n                        <Route path={'/chat'}\r\n                               render={() => <ChatPage/>}\r\n                        />\r\n\r\n                        <Route path={'*'}\r\n                               render={() => <div> Sorry, Page NOT FOUND</div>}\r\n                        />\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\ntype mapDispatchToPropsType = {\r\n    initializeApp: () => void\r\n}\r\ntype mapStateToPropsType = {\r\n    initialized: boolean\r\n}\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    initialized: state.app.initialized\r\n})\r\nconst AppContainer = compose<React.ComponentType>(\r\n    withRouter,\r\n    connect<mapStateToPropsType, mapDispatchToPropsType, {}, AppStateType>(mapStateToProps, {initializeApp: initializeAppTC}))\r\n(App);\r\n\r\n\r\nexport const WrappedApp: React.FC = () => {\r\n    return <HashRouter>\r\n        <Provider store={store}>\r\n            <AppContainer/>\r\n        </Provider>\r\n    </HashRouter>\r\n}\r\n\r\n","import * as serviceWorker from './serviceWorker';\r\nimport ReactDOM from 'react-dom';\r\nimport {WrappedApp} from './App';\r\nimport React from 'react';\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <WrappedApp/>\r\n    , document.getElementById('root')\r\n)\r\n\r\n\r\nserviceWorker.unregister();\r\n\r\n","import React from \"react\";\r\nimport preloader from \"../../assets/preloader/loader.svg\";\r\n\r\nconst style = {\r\n    width: '60px',\r\n    height:'60px'\r\n}\r\n\r\nexport const Preloader = () => {\r\n    return (\r\n        <img src={preloader} alt=\"preloader\" style={style}/>\r\n    )\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__DKLKX\",\"pageNumber\":\"Paginator_pageNumber__2HCfe\",\"selectedPage\":\"Paginator_selectedPage__YduRb\",\"paginator_btn\":\"Paginator_paginator_btn__33sRJ\"};","\r\n\r\nexport const FieldRequired = (value: string) => {\r\n    if (value) return undefined\r\n    return 'Field id required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number) => (value: string) => {\r\n    if (value && value.length > maxLength) return `Max length ${maxLength} symbols`\r\n    return undefined\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControl_error__39Uyn\",\"formSummaryError\":\"FormControl_formSummaryError__2MsIf\"};","import React from \"react\";\r\nimport styles from './FormControl.module.css';\r\nimport {WrappedFieldMetaProps, WrappedFieldProps} from \"redux-form\";\r\n\r\ntype FormControlsPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\n\r\nexport const FormControl: React.FC<FormControlsPropsType> = ({meta, children}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={hasError ? styles.error : ''}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {hasError && <span> {meta.error} </span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}> <textarea {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}> <input {...input} {...restProps}/></FormControl>\r\n}\r\n"],"sourceRoot":""}